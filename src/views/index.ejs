<!DOCTYPE html>
<html lang="en">

<head>
    <% include partials/head %>
</head>
<button class="btn btn-danger" href="/logout" onClick='document.location.href="/logout"'>
    Logout
  </button>


<body class="container">

    <style>
        #chartdiv {
            width: 100%;
            height: 300px;
          }
    </style>


    <div class="col-md-6 col-md-offset-3">
        <h1>Hello <%= name %></h1>
        <button class="btn btn-success" id="show-metrics">
            Bring the metrics
        </button>
        <div id="metrics"></div>
    </div>



      <div id="chartContainer" style="height: 300px; width: 100%;"></div>


      <div id="chartdiv"></div>
</body>

</html>
<script>
    $('#show-metrics').click((e) => {
        e.preventDefault();
        $.getJSON("/metrics.json", {}, (data) => {
            const content = data.map(d => {
                return 'timestamp: ' + d.timestamp + ', value: ' + d.value + '';
            })
            $('#metrics').append(content.join("\n"));
        });
    })   
</script>

<!-- <script src="/js/jquery-3.4.1.min.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js"></script>

<!-- https://canvasjs.com/docs/charts/basics-of-creating-html5-chart/date-time-axis/ -->

<script type="text/javascript">
    window.onload = function () {
        var chart = new CanvasJS.Chart("chartContainer",
        {
          title:{
            text: "Simple Date-Time Chart"
        },
        axisX:{
            title: "timeline",
            gridThickness: 2
        },
        axisY: {
            title: "Downloads"
        },
        data: [
        {        
            type: "area",
            dataPoints: [//array
            { x: new Date(2012, 01, 1), y: 26},
            { x: new Date(2012, 01, 3), y: 38},
            { x: new Date(2012, 01, 5), y: 43},
            { x: new Date(2012, 01, 7), y: 29},
            { x: new Date(2012, 01, 11), y: 41},
            { x: new Date(2012, 01, 13), y: 54},
            { x: new Date(2012, 01, 20), y: 66},
            { x: new Date(2012, 01, 21), y: 60},
            { x: new Date(2012, 01, 25), y: 53},
            { x: new Date(2012, 01, 27), y: 60}
    
            ]
        }
        ]
    });
    
        chart.render();



        var chart = AmCharts.makeChart("chartdiv", {
            "type": "serial",
            "theme": "light",
            "dataProvider": [{
              "timestamp": 1485343314150,
              "value": 3
            },{
              "timestamp": 1485343314300,
              "value": 2
            },{
              "timestamp": 1485343314400,
              "value": 1
            },{
              "timestamp": 1485343314450,
              "value": 1
            }],
            "graphs": [{
              "bullet": "round",
              "type": "smoothedLine",
              "valueField": "value"
            }],
            "categoryField": "timestamp",
            "categoryAxis": {
              "parseDates": true,
              "minPeriod": "fff"
            }
          });

          
    }
    </script>
    <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

    <script src="//www.amcharts.com/lib/3/amcharts.js"></script>
    <script src="//www.amcharts.com/lib/3/serial.js"></script>
    <script src="//www.amcharts.com/lib/3/themes/light.js"></script>